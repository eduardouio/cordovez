<form action="{{rute_url}}gstinicial/validar" method="post">
<div class="row">
	<div class="col-sm-1">
		<div class="form-group">
			<label>Pedido</label>
			<input 
			type="text" 
			class="form-control" 
			name="nro_pedido"
			value="{{order[0].nro_pedido}}" 
			readonly="true" 
			>
		</div>
	</div>

	<div class="col-sm-5">
		<div class="form-group">
			<label>Proveedor</label>
			<select
			name = "identificacion_proveedor"
			class = "form-control"
			>
				<option selected="" disabled="">Seleccione...</option>
				{% for supplier in suppliers %}
					<option value = "{{ supplier.identificacion_proveedor }}"> {{supplier.nombre}}</option>
				{% endfor %}
			</select>
		</div>
	</div>

	<div class="col-sm-4">
		<div class="form-group">
			<label>Concepto</label>
			<select
			type="text" 
			class="form-control" 
			id="concepto"
			name="concepto"
			>
			<option disabled="" selected="">Seleccione...</option>
			<option value="AGENTE INICIAL DOCUMENTAL">AGENTE INICIAL DOCUMENTAL</option>
			<option value="AGESTE INICIAL FISICO">AGESTE INICIAL FISICO</option>
			<option value="ALMACENAJE  INICIAL">ALMACENAJE  INICIAL</option>
			<option value="CANDADO SATELITAL">CANDADO SATELITAL</option>
			<option value="CUSTODIA ARMADA">CUSTODIA ARMADA</option>
			<option value="DEMORAJE">DEMORAJE</option>

		</select>
		</div>
	</div>
<div class="col-sm-2">
		<div class="form-group">
			<label>Fecha (Desde)</label>
			         <div class="input-group date" data-provide="datepicker">
            <input 
               type="text" 
               class="form-control" 
               id="fecha" 
               required="required" 
               name="fecha" 
               class="bootstrap-datepicker" 
               >
            <div class="input-group-addon">
               <span class="glyphicon glyphicon-th"></span>
            </div>
         </div>
		</div>
	</div>	
</div>

<div class="row">

	<div id="hasta" style="display: none;">
		
	</div>

	<div class="col-sm-2">
		<div class="form-group">
			<label>Provisi√≥n (USD)</label>
			<input 
			class="form-control" 
			type="number" 
			step="0.01" 
			name="valor_provisionado"
			>
		</div>
	</div>

	<div class="col-sm-8">
		<div class="form-group">
			<label>Comentarios</label>
			<textarea 
			name="comentarios" 
			id="comentarios" 
			class="form-control"
			rows="1" 
			maxlength="250"></textarea>
		</div>
	</div>
</div>
   <div class="row">
      <div class="col-md-12">
         <hr>
         <button type="submit" class="btn btn-sm btn-default" >
            <span class="fa fa-save fa-fw"></span>
            Guardar Registro
         </button>
      <a href="{{rute_url}}pedido/presentar/{{order[0].nro_pedido}}" class="btn btn-sm btn-default">
            <span class="fa fa-arrow-left fa-fw"></span>
            Regresar Pedido <b>({{order[0].nro_pedido}}) </b>
         </a>
      </div>
   </div>
</form>
<script type="text/javascript">

	$('#comentarios').keyup(function(){
		this.value = this.value.toUpperCase();
	});

	var newInput = `<div class="col-sm-2" id="date_end">
		<div class="form-group">
			<label>Fecha (Hasta)</label>
			 <div class="input-group date" data-provide="datepicker">
            <input 
               type="text" 
               class="form-control" 
               id="fecha_fin" 
               required="required" 
               name="fecha_fin" 
               class="bootstrap-datepicker" 
               >
            <div class="input-group-addon">
               <span class="glyphicon glyphicon-th"></span>
            </div>
         </div>
		</div>
	</div>`
	
		var usedExpenses = {{ used_expenses | raw }} ;		

		$.each(usedExpenses, function(key, value){
			if($("#concepto option[value='" + value.concepto + "'").val() != 'ALMACENAJE  INICIAL'){
				$("#concepto option[value='" + value.concepto + "'").remove();
			}
		});

	$('#concepto').change(function(){
		if ( $(this).val() === 'ALMACENAJE  INICIAL'){
			$('#hasta').append(newInput).fadeIn('slow');
		}else{
			$('#date_end').remove().fadeIn('slow');
		}	});

</script>

